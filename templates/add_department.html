{% extends "base.html" %} {% block title %}إضافة قسم جديد - نظام الموارد
البشرية{% endblock %} {% block content %}
<div class="form-container">
  <div class="form-header">
    <h1><i class="fas fa-plus-circle"></i> إضافة قسم جديد</h1>
    <a href="{{ url_for('departments') }}" class="btn btn-secondary">
      <i class="fas fa-arrow-right"></i> العودة إلى القائمة
    </a>
  </div>

  <form method="POST" class="department-form">
    <div class="form-grid">
      <div class="form-group">
        <label for="name">اسم القسم *</label>
        <input
          type="text"
          id="name"
          name="name"
          required
          placeholder="أدخل اسم القسم"
        />
        <div class="form-error" id="name_error"></div>
      </div>

      <div class="form-group">
        <label for="manager_id">مدير القسم</label>
        <select id="manager_id" name="manager_id">
          <option value="">اختر مدير للقسم</option>
          {% for manager in managers %}
          <option value="{{ manager.id }}">{{ manager.full_name }}</option>
          {% endfor %}
        </select>
      </div>
    </div>

    <div class="form-group">
      <label for="description">وصف القسم</label>
      <textarea
        id="description"
        name="description"
        rows="4"
        placeholder="أدخل وصفاً للقسم..."
      ></textarea>
    </div>

    <div class="form-actions">
      <button type="submit" class="btn btn-primary">
        <i class="fas fa-save"></i> حفظ القسم
      </button>
      <button type="reset" class="btn btn-secondary">
        <i class="fas fa-undo"></i> إعادة تعيين
      </button>
      <a href="{{ url_for('departments') }}" class="btn btn-outline">
        <i class="fas fa-times"></i> إلغاء
      </a>
    </div>
  </form>
</div>

<script>
  function validateForm() {
    let isValid = true;

    // مسح أخطاء سابقة
    document.querySelectorAll(".form-error").forEach((el) => {
      el.style.display = "none";
    });

    // التحقق من اسم القسم
    const name = document.getElementById("name");
    if (!name.value.trim()) {
      showError("name_error", "يرجى إدخال اسم القسم");
      isValid = false;
    }

    return isValid;
  }

  function showError(elementId, message) {
    const errorElement = document.getElementById(elementId);
    errorElement.textContent = message;
    errorElement.style.display = "block";
  }

  // إضافة التحقق من النموذج
  document
    .querySelector(".department-form")
    .addEventListener("submit", function (e) {
      if (!validateForm()) {
        e.preventDefault();
      }
    });
</script>
{% endblock %}
